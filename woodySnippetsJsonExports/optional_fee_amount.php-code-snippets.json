{"generator":"PHP Code Snippets v2.3.1","date_created":"2020-09-29 22:27","snippets":[{"name":"optional_fee_amount","title":"optional_fee_amount","content":"if (!defined('SCRIPTS_DIR')) {\r\n\tdefine('SCRIPTS_DIR', '\/home1\/templark\/scripts');\r\n}\r\nrequire_once(SCRIPTS_DIR.'\/includes\/defines.inc');\r\nrequire_once(SCRIPTS_DIR.'\/classes\/Database.class');\r\n\r\necho '<p>If you are paying for the entire lodge, or need to pay an optional amount, use this area.  You will be prompted to enter an amount and a description when you start the transaction.<\/p>\r\n<form action=\"https:\/\/www.paypal.com\/cgi-bin\/webscr\" method=\"post\">\r\n<div style=\"display:none\">\r\n<input type=\"hidden\" name=\"cmd\" value=\"_xclick\">\r\n<input type=\"hidden\" name=\"business\" value=\"8U24V89KM6K6N\">\r\n<input type=\"hidden\" name=\"lc\" value=\"US\">\r\n<input type=\"hidden\" name=\"item_name\" value=\"Optional Payment\">\r\n<input type=\"hidden\" name=\"button_subtype\" value=\"services\">\r\n<input type=\"hidden\" name=\"no_note\" value=\"0\">\r\n<input type=\"hidden\" name=\"cn\" value=\"Add special instructions to the seller:\">\r\n<input type=\"hidden\" name=\"no_shipping\" value=\"2\">\r\n<input type=\"hidden\" name=\"currency_code\" value=\"USD\">\r\n<input type=\"hidden\" name=\"bn\" value=\"PP-BuyNowBF:btn_paynow_LG.gif:NonHosted\">\r\n<\/div>\r\n<table>\r\n<tr><td><input type=\"hidden\" name=\"on0\" value=\"Lodge\">Lodge<\/td><\/tr><tr><td><select name=\"os0\">';\r\n\r\n$current_user = wp_get_current_user();\r\n$roles = implode('\",\"',$current_user->roles);\r\n$db = LocalDatabase::getReadable('master');\r\n$ltable='lodge_directory';\r\n$query = 'SELECT * FROM ' . $ltable . ' WHERE LODGE_CODE in (\"'.$roles.'\")';\r\n$result = mysqli_query($db->connection, $query);\r\nif($result) {\r\n\twhile($row = mysqli_fetch_array($result)){\r\n\t\tif($row['DATE_DISBANDED'] == \"0000-00-00\") {\r\n\t\t\techo '<option value=\"' . $row['LODGE_NAME'] . '\">' . $row['LODGE_NAME'] . '<\/option>';  \r\n\t\t}\r\n    }\r\n}\r\nmysqli_close($db->connection);\r\necho '<\/select> <\/td><\/tr>\r\n<tr><td><input type=\"hidden\" name=\"on1\" value=\"Name\">Name<\/td><\/tr><tr><td><input type=\"text\" name=\"os1\" value=\"'.$current_user->display_name.'\" maxlength=\"200\"><\/td><\/tr>\r\n<\/table>\r\n<input type=\"image\" src=\"https:\/\/www.paypalobjects.com\/en_US\/i\/btn\/btn_paynow_LG.gif\" border=\"0\" name=\"submit\" alt=\"PayPal - The safer, easier way to pay online!\">\r\n<img alt=\"\" border=\"0\" src=\"https:\/\/www.paypalobjects.com\/en_US\/i\/scr\/pixel.gif\" width=\"1\" height=\"1\">\r\n<\/form>';","location":"","type":"php","filters":"","changed_filters":"","scope":"shortcode","description":"PHP Script to pay optional fee amount","attributes":"","tags":[]}]}