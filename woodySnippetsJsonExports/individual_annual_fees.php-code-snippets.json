{"generator":"PHP Code Snippets v2.3.1","date_created":"2020-09-29 22:27","snippets":[{"name":"individual_annual_fees","title":"individual_annual_fees","content":"if (!defined('SCRIPTS_DIR')) {\r\n\tdefine('SCRIPTS_DIR', '\/home1\/templark\/scripts');\r\n}\r\nrequire_once(SCRIPTS_DIR.'\/includes\/defines.inc');\r\nrequire_once(SCRIPTS_DIR.'\/classes\/Database.class');\r\n\r\necho '<p>The prices listed below, take into account the charges collected by PayPal (2.9% + $ .30 USD). If you would like to avoid the convenience of PayPal, please contact Money of the Grand Lodge to coordinate payment.<\/p>';\r\necho '<em>*Annual Fees are $75. Thirty percent (30%) stays in the local lodge; Seventy percent (70%) is paid to the Grand Council<\/em>.';\r\necho '<form action=\"https:\/\/www.paypal.com\/cgi-bin\/webscr\" method=\"post\">\r\n<div style=\"display:none\">\r\n<input type=\"hidden\" name=\"cmd\" value=\"_xclick\">\r\n<input type=\"hidden\" name=\"business\" value=\"8U24V89KM6K6N\">\r\n<input type=\"hidden\" name=\"lc\" value=\"US\">\r\n<input type=\"hidden\" name=\"item_name\" value=\"Annual Member Fees\">\r\n<input type=\"hidden\" name=\"button_subtype\" value=\"services\">\r\n<input type=\"hidden\" name=\"no_note\" value=\"0\">\r\n<input type=\"hidden\" name=\"cn\" value=\"Add special instructions to the seller:\">\r\n<input type=\"hidden\" name=\"no_shipping\" value=\"2\">\r\n<input type=\"hidden\" name=\"currency_code\" value=\"USD\">\r\n<input type=\"hidden\" name=\"bn\" value=\"PP-BuyNowBF:btn_buynowCC_LG.gif:NonHosted\">\r\n<\/div>\r\n<table>\r\n<tr><td><input type=\"hidden\" name=\"on0\" value=\"Member Fees\">Member Fees<\/td><\/tr><tr><td><select name=\"os0\">';\r\n$current_user = wp_get_current_user();\r\n$roles = implode('\",\"',$current_user->roles);\r\nif (in_array(\"grand_lodge\", $current_user->roles)) {\r\n\techo '<option value=\"Annual Fee - Grand Lodge\">Annual Fee - Grand Lodge $78.00 USD<\/option>';\r\n} else {\r\n\techo '<option value=\"Annual Fee - Expansion Lodge\">Annual Fee - Expansion Lodge $55.00 USD<\/option>';\r\n}\r\necho '<\/select> <\/td><\/tr>\r\n<tr><td><input type=\"hidden\" name=\"on1\" value=\"Lodge\">Lodge<\/td><\/tr><tr><td><select name=\"os1\">';\r\n\r\n\/\/Connect to Database\r\n$db = LocalDatabase::getReadable('master');\r\n$ltable='lodge_directory';\r\n$query = 'SELECT * FROM ' . $ltable . ' WHERE LODGE_CODE in (\"'.$roles.'\")';\r\n$result = mysqli_query($db->connection, $query);\r\nif($result) {\r\n\twhile($row = mysqli_fetch_array($result)){\r\n\t\tif($row['DATE_DISBANDED'] == \"0000-00-00\") {\r\n\t\t\techo '<option value=\"' . $row['LODGE_NAME'] . '\">' . $row['LODGE_NAME'] . '<\/option>';  \r\n\t\t}\r\n    }\r\n}\r\nmysqli_close($db->connection);\r\necho '<\/select> <\/td><\/tr>\r\n<tr><td><input type=\"hidden\" name=\"on2\" value=\"Name\">Name<\/td><\/tr><tr><td><input type=\"text\" name=\"os2\" value = \"'.$current_user->display_name.'\" maxlength=\"200\"><\/td><\/tr>\r\n<\/table>\r\n<div style=\"display:none\">\r\n<input type=\"hidden\" name=\"currency_code\" value=\"USD\">\r\n<input type=\"hidden\" name=\"option_select0\" value=\"Annual Fee - Grand Lodge\">\r\n<input type=\"hidden\" name=\"option_amount0\" value=\"78.00\">\r\n<input type=\"hidden\" name=\"option_select1\" value=\"Annual Fee - Expansion Lodge\">\r\n<input type=\"hidden\" name=\"option_amount1\" value=\"55.00\">\r\n<input type=\"hidden\" name=\"option_index\" value=\"0\">\r\n<\/div>\r\n<input type=\"image\" src=\"https:\/\/www.paypalobjects.com\/en_US\/i\/btn\/btn_paynowCC_LG.gif\" border=\"0\" name=\"submit\" alt=\"PayPal - The safer, easier way to pay online!\">\r\n<img alt=\"\" border=\"0\" src=\"https:\/\/www.paypalobjects.com\/en_US\/i\/scr\/pixel.gif\" width=\"1\" height=\"1\">\r\n<\/form>';","location":"","type":"php","filters":"","changed_filters":"","scope":"shortcode","description":"PHP Script for Individual Annual Fees","attributes":"","tags":[]}]}