{"generator":"PHP Code Snippets v2.3.1","date_created":"2020-09-29 22:29","snippets":[{"name":"templar_wisdom_show","title":"templar_wisdom_show","content":"if (!defined('SCRIPTS_DIR')) {\r\n\tdefine('SCRIPTS_DIR', '\/home1\/templark\/scripts');\r\n}\r\nrequire_once(SCRIPTS_DIR.'\/includes\/defines.inc');\r\nrequire_once(SCRIPTS_DIR.'\/classes\/Database.class');\r\n\r\n\/\/Connect to Database\r\n$db = LocalDatabase::getReadable('master');\r\n$qtable='quotes';\r\n$ktable='knight_directory';\r\n$ltable='lodge_directory';\r\n$displayrow=1;\r\n\r\n$query = 'SELECT q.quote AS quote, k.nickname AS nickname, k.fname AS fname, l.lodge_name AS lodgename FROM quotes AS q, knight_directory AS k, lodge_directory AS l WHERE q.knight_num = k.record_num AND k.lodge = l.lodge_num AND q.record_num > 0';\r\n$result = mysqli_query($db->connection, $query);\r\nif($result) {\r\n\twhile($row = mysqli_fetch_array($result)) {\r\n            echo $row['quote'];\r\n            if($row['nickname'] == \"\") {\r\n\t\techo ' - ' . $row['fname'];\r\n\t    }\r\n\t    else {\r\n\t\techo ' - ' . $row['nickname'];\r\n\t    }\r\n            echo ' [' . $row['lodgename'] . ']<br \/>';\r\n\t}\r\n}\r\nmysqli_close($db->connection);","location":"","type":"php","filters":"","changed_filters":"","scope":"shortcode","description":"PHP script to show all Templar Wisdom Quotes","attributes":"","tags":[]}]}